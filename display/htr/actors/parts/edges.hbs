<section class="tab {{tab.cssClass}}" data-tab="{{tab.id}}" data-group="{{tab.group}}">
    <div class="flexrow">
        <div class="edges-list item-list">
            <!-- Item control for adding new edge lists -->
            <div class="item-controls flex-center">
                <a class="item-control add-edge" title="{{localize 'WOD5E.HTR.AddEdge'}}" data-action="addEdge">
                    <h3>
                        <i class="fas fa-plus"></i>
                        {{localize "WOD5E.HTR.AddEdge"}}
                    </h3>
                </a>
            </div>
            <!-- Iterate through each of the edge lists -->
            {{#each edges as |edge key|}}
                {{#if edge.visible}}
                    <div class="edge category">
                        <div class="flexcol">
                            <div class="flexrow item-header">
                                <div class="item-name">
                                    {{edge.displayName}}
                                </div>
                                <!-- Item controls for Edge sections -->
                                <div class="item-controls">
                                    <!-- Icon to show the edge description to the chat-->
                                    <a class="item-control edge-chat" title="{{localize 'WOD5E.ItemsList.ShowToChat'}}" data-action="edgeChat" data-edge="{{key}}">
                                        <i class="fas fa-comment-alt"></i>
                                    </a>
                                    <!-- Icon to delete the edge (as long as it doesn't have any perks) -->
                                    {{#if (eq edge.perks.length 0)}}
                                        <a class="item-control remove-edge" title="{{localize 'WOD5E.Delete'}}" data-action="removeEdge" data-edge="{{key}}">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    {{/if}}
                                </div>
                            </div>
                        </div>
                        <div class="edge-description">
                            <prose-mirror name="system.edges.{{key}}.description" value="{{edge.description}}"
                                toggled="true" compact="true">
                                {{{edge.enrichedDescription}}}
                            </prose-mirror>
                        </div>
                    </div>
                {{/if}}
            {{/each}}
        </div>
        <div class="perks-list item-list">
            {{#each edges as |edge key|}}
                {{#if edge.visible}}
                    <div class="edge category">
                        <div class="flexrow item-header">
                            <div class="item-name">
                                {{localize "WOD5E.HTR.StringPerks" string=edge.displayName}}
                            </div>
                            <!-- Item controls for Edge sections -->
                            <div class="item-controls">
                                <!-- Add new edge perk -->
                                <a class="item-control item-create" data-action="createItem" title="{{localize 'WOD5E.HTR.AddPerk'}}" data-type="perk" data-subtype="{{key}}">
                                    <i class="fas fa-plus"></i>
                                </a>
                            </div>
                        </div>
                        {{#each edge.perks as |perk key|}}
                            <div class="collapsible-container">
                                <div class="flexrow perk item" data-drag="true" data-document-uuid="{{perk.uuid}}" data-type="Item">
                                    <div class="item-image">
                                        <img src="{{perk.img}}">
                                    </div>
                                    <div class="item-name{{#if perk.system.enrichedDescription}} collapsible{{/if}}" {{#if perk.system.enrichedDescription}}data-action="toggleCollapse"{{/if}}>{{perk.name}}</div>
                                    <div class="item-controls">
                                        <!-- Icon to edit the perk-->
                                        <a class="item-control item-edit" data-action="itemEdit" data-item-id="{{perk._id}}" title="{{localize 'WOD5E.Edit'}}">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <!-- Icon to display the perk in chat -->
                                        <a class="item-control item-chat" data-action="itemChat" data-item-id="{{perk._id}}" title="{{localize 'WOD5E.ItemsList.ShowToChat'}}">
                                            <i class="fas fa-comment-alt"></i>
                                        </a>
                                        <!-- Icon to delete the perk -->
                                        <a class="item-control item-delete" data-action="itemDelete" data-item-id="{{perk._id}}" title="{{localize 'WOD5E.Delete'}}">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="collapsible-content item-description">
                                    {{{perk.system.enrichedDescription}}}
                                </div>
                            </div>
                        {{/each}}
                        <div class="edge-pools flexcol">
                            {{#each edge.pools as |pool key|}}
                                <div class="edge-pool flexrow item" data-drag="true" data-document-uuid="{{pool.uuid}}" data-type="Item">
                                    <div class="edge-pool-label rollable-item" data-action="rollItem" data-item-uuid="{{pool.uuid}}">
                                        {{pool.name}}
                                        <i class="fa-solid fa-dice-d10"></i>
                                    </div>
                                    <div class="item-controls">
                                        <!-- Icon to edit the edge pool -->
                                        <a class="item-control item-edit" data-action="itemEdit" data-item-id="{{pool._id}}" title="{{localize 'WOD5E.Edit'}}">
                                            <i class="fas fa-edit"></i>
                                        </a>
                                        <!-- Icon to delete the edge pool -->
                                        <a class="item-control item-delete" data-action="itemDelete" data-item-id="{{pool._id}}" title="{{localize 'WOD5E.Delete'}}">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </div>
                                </div>
                            {{/each}}
                        </div>
                        <div class="flex-center add-edge-pool item-create" data-action="createItem" data-type="edgepool" data-subtype="{{key}}">
                            <i class="fas fa-plus"></i>
                            {{localize "WOD5E.HTR.AddEdgePool"}}
                        </div>
                    </div>
                {{/if}}
            {{/each}}
        </div>
    </div>
</section>
